cmake_minimum_required(VERSION 3.20)

project(vpxpp VERSION 0.0.1)

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_C_STANDARD 99)

set(CMAKE_MODULE_PATH
	{CMAKE_SOURCE_DIR}
	${CMAKE_SOURCE_DIR}/cmake/modules
	${CMAKE_MODULE_PATH}
)

add_compile_definitions(
	V8_COMPRESS_POINTERS
)

find_package(V8 REQUIRED)
find_package(nlohmann_json 3.2.0 REQUIRED)

include_directories(
	math
	src
	ext/pole
	${V8_INCLUDE_DIR}
)

add_executable(vpxpp
	math/vector.h
	math/cmath.h

	src/def.h
	src/def.cpp

	src/misc.h
	src/physconst.h
	
	src/hash.h

	src/BaseProperty.h

	src/RenderDevice.h

	src/ILoadable.h

	src/ISelect.h
	src/ISelect.cpp

	src/IScriptable.h
	src/IScriptable.cpp

	src/IEditable.h
	src/IEditable.cpp

	src/EditableRegistry.h

	src/CodeViewer.h
	src/CodeViewer.cpp

	src/BiffReader.h
	src/BiffReader.cpp

	src/RegUtil.h
	src/RegUtil.cpp

	src/PinTable.h
	src/PinTable.cpp

	src/Bumper.h
	src/Bumper.cpp
	src/Decal.h
	src/Decal.cpp
	src/DispReel.h
	src/DispReel.cpp
	src/Flasher.h
	src/Flasher.cpp
	src/Flipper.h
	src/Flipper.cpp
	src/Gate.h
	src/Gate.cpp
	src/Kicker.h
	src/Kicker.cpp
	src/Light.h
	src/Light.cpp
	src/LightSeq.h
	src/LightSeq.cpp
	src/Plunger.h
	src/Plunger.cpp
	src/Primitive.h
	src/Primitive.cpp
	src/Ramp.h
	src/Ramp.cpp
	src/Rubber.h
	src/Rubber.cpp
	src/Spinner.h
	src/Spinner.cpp
	src/Surface.h
	src/Surface.cpp
	src/Textbox.h
	src/Textbox.cpp
	src/Timer.h
	src/Timer.cpp
	src/Trigger.h
	src/Trigger.cpp
	src/HitTarget.h
	src/HitTarget.cpp

	ext/pole/pole.cpp

	src/main.cpp
)

target_link_libraries(vpxpp PRIVATE
	${V8_BASE_LIBRARY}
	${V8_LIBPLATFORM_LIBRARY}
	nlohmann_json::nlohmann_json
)
